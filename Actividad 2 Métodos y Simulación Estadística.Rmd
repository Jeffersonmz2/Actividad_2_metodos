---
title: "Actividad 2 Métodos y Simulación Estadística"
author: "Jefferson Martinez"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
source("scrip_actividad_2.R")
set.seed(123)
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
```

## Problema 1: Estimación de la probabilidad y la media
Una empresa de servicio técnico recibe, en promedio, 5 solicitudes de reparación por hora. Suponiendo que el número de solicitudes sigue una distribución de Poisson, realiza las siguientes actividades:

## a. Cálculo de probabilidad teórica:
- ### Calcula la probabilidad de que en una hora lleguen exactamente 3 solicitudes usando la fórmula de la distribución de Poisson. Expresa el resultado como P(X=3)
.
La probabilidad de que **P(X=3)** es  **`r xes3`** 

## b Simulación con una muestra:
- ### Genera una muestra aleatoria de tamaño n=1,000

*`r muestra`*

- ### Calcula la frecuencia relativa para X=3
 
 La frecuencia relativa para **X=3** es **`r frecuencia_relativa`**
 
 - ### Compara e interpreta el resultado frente a la probabilidad teórica.

 la diferencia entre la probabilidad la simulada y la teoríca   es **`r xes3-frecuencia_relativa`**
 
 
Este resultado ilustra un concepto fundamental en estadística conocido como la Ley de los Grandes Números. Esta ley establece que a medida que el número de repeticiones de un experimento aleatorio (en este caso, `r n` simulaciones) aumenta, la frecuencia relativa de un evento se acerca cada vez más a su probabilidad teórica.

En este ejercicio, la simulación de `r n` eventos nos dio un valor `r frecuencia_relativa` que está muy cerca del valor real `r xes3`. Si hubiéramos realizado 10,000 o 100,000 simulaciones, es muy probable que la frecuencia relativa se hubiera acercado aún más a la probabilidad teórica.

**En resumen:**

La probabilidad teórica es el valor exacto, calculado a partir de las propiedades de la distribución de probabilidad (en este caso, la distribución de Poisson

La probabilidad empírica es una estimación del valor real, obtenida a través de la experimentación o simulación.

- ### Genera 100 muestras aleatorias de tamaño n=1,000.
`r muestra`

- ### Calcula la frecuencia relativa para X=3 en cada muestra.
`r frecuencias_relativas`

- ### Construye un gráfico de dispersión:
```{r mostrar-boxplots, echo=FALSE, fig.width=12, fig.height=10, warning = FALSE}
plot(datos_grafico$Simulacion, datos_grafico$Frecuencia,
     main = "Frecuencias relativas de X=3 en 100 simulaciones",
     xlab = "Número de Simulación",
     ylab = "Frecuencia Relativa (X=3)",
     pch = 19,
     col = "blue")

# Añadir la línea de probabilidad teórica
probabilidad_teorica <- dpois(3, lambda = 5)
abline(h = probabilidad_teorica, col = "red", lty = 2, lwd = 2)

# Añadir la leyenda en una posición que no estorbe
legend("bottomright",
       legend = c("Frecuencia Relativa", "Probabilidad Teórica"),
       col = c("blue", "red"), pch = c(19, NA), lty = c(NA, 2), lwd = c(NA, 2),
       bg = "white",
       box.lwd = 0.5)
```